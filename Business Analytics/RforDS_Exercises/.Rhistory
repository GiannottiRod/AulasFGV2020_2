flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
boxplot()
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>% summary()
sum(is.na(flights2$arr_dep_time_diff))
sum(is.na(flights2$air_time))
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
boxplot()
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
summary()
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
boxplot()
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
summary()
flights %>% mutate(
comparison = ifelse(
dep_time_mins >= (sched_dep_time_mins + dep_delay),
dep_time_mins - (sched_dep_time_mins + dep_delay),
dep_time_mins - (sched_dep_time_mins + dep_delay) + 24*60
)) %>%
select(comparison) %>%
summary()
flights2 %>% mutate(
comparison = ifelse(
dep_time_mins >= (sched_dep_time_mins + dep_delay),
dep_time_mins - (sched_dep_time_mins + dep_delay),
dep_time_mins - (sched_dep_time_mins + dep_delay) + 24*60
)) %>%
select(comparison) %>%
summary()
flights %>% mutate(
rank_delay = min_rank( desc(
arr_delay + dep_delay
))) %>%
arrange(rank_delay) %>%
filter(rank_delay <= 10)
# ?rank
flights %>%
mutate(
rank_delay = min_rank( desc(
arr_delay + dep_delay
))) %>%
arrange(rank_delay) %>%
filter(rank_delay <= 10)
# ?rank
flights %>%
group_by(flight) %>%
summarise(abs(arr_delay))
flights %>%
group_by(abs(arr_delay)) %>%
summarise(flight)
flights %>%
group_by(abs(arr_delay)) %>%
summarise(flight) %>%
group_by(flight)
flights %>%
group_by(abs(arr_delay)) %>%
summarise(flight) %>%
group_by(flight)
summarise(count = n())
flights %>%
group_by(abs(arr_delay)) %>%
summarise(flight) %>%
group_by(flight)
summarise(n())
flights %>%
group_by(abs(arr_delay)) %>%
summarise(flight) %>%
group_by(flight)
summarise(count())
not_cancelled %>% count(dest)
not_cancelled <- flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay))
not_cancelled <- flights %>%
filter(!is.na(dep_delay), !is.na(arr_delay))
not_cancelled %>% count(dest)
not_cancelled %>%
group_by(dest) %>%
summarise(n())
not_cancelled %>%
group_by(dest) %>%
summarise(n = n())
not_cancelled %>% count(dest)
not_cancelled %>%
group_by(dest) %>%
summarise(n = n())
identical(not_cancelled %>% count(dest),
not_cancelled %>%
group_by(dest) %>%
summarise(n = n()))
identical(
not_cancelled %>% count(dest),
not_cancelled %>%
group_by(dest) %>%
summarise(n = n(), .groups = 'drop'))
count(tailnum, wt = distance)
count(tailnum, wt = distance)
not_cancelled %>% count(tailnum, wt = distance)
?count
identical(
not_cancelled %>% count(tailnum, wt = distance),
not_cancelled %>%
group_by(tailnum) %>%
summarise(n = sum(distance), .groups = 'drop')
)
identical(
not_cancelled %>% count(dest),
not_cancelled %>%
group_by(dest) %>%
summarise(n = n(), .groups = 'drop')
)
identical(
not_cancelled %>% count(tailnum, wt = distance),
not_cancelled %>%
group_by(tailnum) %>%
summarise(n = sum(distance), .groups = 'drop')
)
flights %>% summarise(sum(is.na()))
flights %>% summary
flights %>% filter(is.na(arr_delay))
flights3 <- flights %>%
mutate(dia_semana = lubridate::wday(time_hour))
flights3 %>%
group_by(dia_semana) %>%
summarise(sum(arr_delay))
flights3 <- not_cancelled %>%
mutate(dia_semana = lubridate::wday(time_hour))
flights3 %>%
group_by(dia_semana) %>%
summarise(sum(arr_delay))
flights3 %>%
group_by(dia_semana) %>%
summarise(soma_atraso = sum(arr_delay)) %>%
ggplot(mapping = aes(x = dia_semana, y = soma_atraso)) +
geom_bar()
flights3 %>%
group_by(dia_semana) %>%
summarise(soma_atraso = sum(arr_delay)) %>%
ggplot(mapping = aes(x = soma_atraso)) +
geom_bar()
flights3 %>%
group_by(dia_semana) %>%
summarise(soma_atraso = sum(arr_delay)) %>%
ggplot(mapping = aes(x = dia_semana, y = soma_atraso)) +
geom_col()
flights3 <- flights %>%
mutate(dia_semana = lubridate::wday(time_hour))
flights3 %>%
group_by(dia_semana) %>%
summarise(soma_atraso = sum(is.na(dep_time))) %>%
ggplot(mapping = aes(x = dia_semana, y = soma_cancelados)) +
geom_col()
flights3 %>%
group_by(dia_semana) %>%
summarise(soma_cancelados = sum(is.na(dep_time))) %>%
ggplot(mapping = aes(x = dia_semana, y = soma_cancelados)) +
geom_col()
flights3 %>%
group_by(dia_semana) %>%
summarise(n_voos = count(flight)) %>%
ggplot(mapping = aes(x = dia_semana, y = n_voos)) +
geom_col() # voos totais por dia da semana
flights3 %>%
group_by(dia_semana) %>%
summarise(n_voos = n()) %>%
ggplot(mapping = aes(x = dia_semana, y = n_voos)) +
geom_col() # voos totais por dia da semana
flights %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay))
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay))
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay)) %>%
arrange(sum_delays)
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay)) %>%
arrange(desc(sum_delays))
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay)) %>%
arrange(desc(sum_delays)) %>%
ggplot(mapping = aes(x = carrir, y = sum_delays)) +
geom_col()
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay)) %>%
arrange(desc(sum_delays)) %>%
ggplot(mapping = aes(x = carrier, y = sum_delays)) +
geom_col()
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay), .groups = 'drop') %>%
arrange(desc(sum_delays)) %>%
ggplot(mapping = aes(x = carrier, y = sum_delays)) +
geom_col()
flights3 %>%
group_by(dia_semana) %>%
summarise(n_voos = n(), .groups = "drop") %>%
ggplot(mapping = aes(x = dia_semana, y = n_voos)) +
geom_col() # voos totais por dia da semana
flights3 <- flights %>%
mutate(dia_semana = lubridate::wday(time_hour))
flights3 %>%
group_by(dia_semana) %>%
summarise(soma_cancelados = sum(is.na(dep_time)), .groups = "drop") %>%
ggplot(mapping = aes(x = dia_semana, y = soma_cancelados)) +
geom_col() # voos cancelados por dia da semana
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay), .groups = 'drop') %>%
arrange(desc(sum_delays)) %>%
ggplot(mapping = aes(x = carrier, y = sum_delays)) +
geom_col()
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay), .groups = 'drop') %>%
arrange(desc(sum_delays)) %>%
ggplot(mapping = aes(x = carrier, y = sum_delays)) +
geom_col() +
coord_flip()
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay), .groups = 'drop') %>%
ggplot(mapping = aes(x = carrier, y = sum_delays)) +
geom_col() +
coord_flip()
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay), .groups = 'drop') %>%
ggplot(mapping = aes(x = reorder(carrier), y = sum_delays)) +
geom_col() +
coord_flip()
?reorder
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay), .groups = 'drop') %>%
ggplot(mapping = aes(x = reorder(carrier, X = sum_delays), y = sum_delays)) +
geom_col() +
coord_flip()
```{r, fig.height= 8}
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay), .groups = 'drop') %>%
ggplot(mapping = aes(x = reorder(carrier, X = sum_delays), y = sum_delays)) +
geom_col() +
coord_flip()
?reorder
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay), .groups = 'drop') %>%
ggplot(mapping = aes(x = reorder(carrier, X = sum_delays), y = sum_delays)) +
geom_col() +
coord_flip()
?reorder
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay), .groups = 'drop') %>%
ggplot(mapping = aes(x = reorder(carrier, X = sum_delays), y = sum_delays)) +
geom_col() +
coord_flip() +
scale_fill_gradient(low="green", high="red")
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay), .groups = 'drop') %>%
ggplot(mapping = aes(x = reorder(carrier, X = sum_delays), y = sum_delays)) +
geom_col() +
coord_flip() +
scale_fill_gradient(low="green", high="red")
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay), .groups = 'drop') %>%
ggplot(mapping = aes(x = reorder(carrier, X = sum_delays), y = sum_delays, fill = sum_delays)) +
geom_col() +
coord_flip() +
scale_fill_gradient(low="green", high="red")
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay), .groups = 'drop') %>%
ggplot(mapping = aes(x = reorder(carrier, X = sum_delays), y = sum_delays, fill = sum_delays)) +
geom_col() +
coord_flip() +
scale_fill_gradient(low="green", high="red") +
xlab(Carrier_Code)
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay), .groups = 'drop') %>%
ggplot(mapping = aes(x = reorder(carrier, X = sum_delays), y = sum_delays, fill = sum_delays)) +
geom_col() +
coord_flip() +
scale_fill_gradient(low="green", high="red") +
xlab("Carrier_Code")
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay), .groups = 'drop') %>%
ggplot(mapping = aes(x = reorder(carrier, X = sum_delays), y = sum_delays, fill = sum_delays)) +
geom_col() +
coord_flip() +
scale_fill_gradient(low="green", high="red") +
xlab("Carrier Code") +
title("Atrasos por companhia, puro")
not_cancelled %>%
group_by(carrier) %>%
summarise(sum_delays = sum(arr_delay), .groups = 'drop') %>%
ggplot(mapping = aes(x = reorder(carrier, X = sum_delays), y = sum_delays, fill = sum_delays)) +
geom_col() +
coord_flip() +
scale_fill_gradient(low="green", high="red") +
xlab("Carrier Code") +
ggtitle("Atrasos por companhia, puro")
?flights
not_cancelled %>%
group_by(origin) %>%
summarise(sum_delays = sum(arr_delay), .groups = 'drop') %>%
ggplot(mapping = aes(x = reorder(origin, X = sum_delays), y = sum_delays, fill = sum_delays)) +
geom_col() +
coord_flip() +
scale_fill_gradient(low="green", high="red") +
xlab("Aeroporto saÃ­da") +
ggtitle("Atrasos por aeroporto, soma")
?count
flights3 %>%
group_by(dia_semana) %>%
summarise(soma_cancelados = sum(is.na(dep_time)), .groups = "drop") %>%
ggplot(mapping = aes(x = dia_semana, y = soma_cancelados)) +
geom_col() +
col("lightblue")# voos cancelados por dia da semana
flights3 <- flights %>%
mutate(dia_semana = lubridate::wday(time_hour))
flights3 %>%
group_by(dia_semana) %>%
summarise(soma_cancelados = sum(is.na(dep_time)), .groups = "drop") %>%
ggplot(mapping = aes(x = dia_semana, y = soma_cancelados)) +
geom_col() # voos cancelados por dia da semana
flights3 %>%
group_by(dia_semana) %>%
summarise(soma_cancelados = sum(is.na(dep_time)), .groups = "drop") %>%
ggplot(mapping = aes(x = dia_semana, y = soma_cancelados), colour = "blue") +
geom_col() # voos cancelados por dia da semana
flights3 %>%
group_by(dia_semana) %>%
summarise(soma_cancelados = sum(is.na(dep_time)), .groups = "drop") %>%
ggplot(mapping = aes(x = dia_semana, y = soma_cancelados)) +
geom_col(colour = "blue") # voos cancelados por dia da semana
flights3 %>%
group_by(dia_semana) %>%
summarise(soma_cancelados = sum(is.na(dep_time)), .groups = "drop") %>%
ggplot(mapping = aes(x = dia_semana, y = soma_cancelados)) +
geom_col(fill = "blue") # voos cancelados por dia da semana
flights3 %>%
group_by(dia_semana) %>%
summarise(soma_cancelados = sum(is.na(dep_time)), .groups = "drop") %>%
ggplot(mapping = aes(x = dia_semana, y = soma_cancelados)) +
geom_col(fill = "lightblue") # voos cancelados por dia da semana
flights3 %>%
group_by(dia_semana) %>%
summarise(n_voos = n(), .groups = "drop") %>%
ggplot(mapping = aes(x = dia_semana, y = n_voos)) +
geom_col(fill = "lightblue") # voos totais por dia da semana
knitr::opts_chunk$set(fig.width=6 , fig.height=3)
install.packages("maps")
library(maps)
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
boxplot()
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
summary()
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
boxplot()
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
summary()
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
boxplot()
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
summary()
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
boxplot()
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
summary()
```{r, fig.height= 2, fig.width = 5}
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
boxplot()
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
summary()
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
boxplot()
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
summary()
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
boxplot()
flights2 %>%
na.omit() %>%
mutate(
comparacao =
air_time - arr_dep_time_diff
) %>%
select(comparacao) %>%
summary()
